---
title: Linux常用命令
tags: [Linux]
categories: 知识
---

# Linux 命令

## 文件管理

`vi test.js`
创建并打开一个文件: test.js
`touch`
touch 的作用是更改一个文件的目录或者目录的时间,如果 touch 的文件不存在则会创建这个空文件.
`echo "abcd" > 1.txt`
创建 1.txt 并将 abcd 写入.

### less/more/cat

三种查看文件内容的工具.主要区别是:
cat 是一次性显示整个文件的内容,还可以把多个文件连接起来显示.经常与重定向符号配合使用,适用于文件比较少的情况.
more/less 一般会用来显示超过一屏的内容,并且提供翻页功能.more 比 cat 强大,提供分页显示的功能,less 比 more 更强大,提供翻页,跳转,查找等命令,并且 more/less 都支持使用 space/b 显示下一页,使用 f 显示上一页.
在 less 中,按`h`可以进入帮助界面,提供丰富的帮助命令.

### vi/vim

vi/vim 是 Linux 下的文本编辑工具,在 vi/vim 的版本是选择上,原则是:**能使用 vim 就使用 vim,能用最新版就用最新版**

#### 启动及关闭 vi/vim

#####启动
vi 打开 vi/vim
`vi <file>` 打开 vi/vim 并加载文件`<file>`

##### 退出

`ZQ/:q!` 无条件退出
`ZZ/:wq` 存盘并退出

##### 保存部分文件

`:m,nw <file>` 将 m 行到 n 行部分的内容保存到文件 `<file>` 中 ;
:m,nw >> `<file>` 将 m 行到 n 行的内容添加到文件 `<file>` 的末尾

#### 移动光标

##### 字符

h 左移一个字符
l 右移一个字符

##### 单词

`w/W` 移动到下一单词的开头
`b/B` 移动到上一单词的开头
`e/E`移动到光标所在单词的末尾

##### 行

j 下移一行
k 上移一行
0(数字) 移动到当前行的开头
^ 移动到当前行的第一个非空字符
\$ 移动到当前行末尾
:n 移动到第 N 行

##### 句子

) 移动到当前句子的末尾
( 移动到当前句子的  开头

##### 段落

} 移动到当前段落的末尾
{ 移动到当前段落的开头

##### 屏

H 移动到屏幕的第一行
M 移动到屏幕中间一行
L 移动到  屏幕的最后一行

##### 页

`Ctrl-f` 向前滚动一页
`Ctrl-b`向后滚动一页
`Ctrl-u` 向前滚动半页
`Ctrl-d` 向后滚动半页

##### 文件

`G` 移动到文件末尾
`gg` 移动到文件开头
`:0` 移动到文件第一行
`:$` 移动到文件最后一行

#### 文本编辑

##### 字符

x 删除光标位置的字符
c 更改当前字符并进入插入模式
s 替换光标位置的字符并进入插入模式
r 替换光标位置的字符但不进入插入模式
i 在当前位置的字符之前进入插入模式
a 在当前位置的字符之后进入插入模式

##### 单词

cw/cW 删除当前单词从光标开始的部分并进入插入模式
cb/cB 删除当前单词从光标所在位置至单词开始的部分并进入插入模式
dw/dW 删除当前单词从光标开始的部分但不进入插入模式
db/dB 删除当前单词从光标所在位置至单词开始的部分但不进入插入模式

##### 行

dd 删除当前行
d0 删除从当前光标开始到行末的内容
d\$ 删除从当前光标开始到行末的内容
I 在当前行的行首进入插入模式
A 在当前行的行尾进入插入模式
o 在当前行下方另起一行进入插入模式
O 在当前行上方另起一行进入插入模式

##### 句子

d) 删除当前句子从光标位置开始到句末的内容
d( 删除当前句子从光标位置开始到句首的内容

##### 段落

d} 删除当前段落从光标位置开始到段末的内容
d{ 删除当前段落从光标位置开始到段首的内容

#### 文本编辑的高效命令

##### 复制与粘贴

yw 复制当前单词从光标开始的部分
yy 复制光标所在行的所有字符
p 将最后一个删除或复制文本放在当前字符
P 将最后一个删除或复制文本放在当前字符之前 配合操作数使用可快速拷贝编辑文本

##### 撤销与重做

u 撤消更改
Ctrl-R 重做更改

##### 重复操作

. 重复上次操作

##### 交换相邻字符或行

xp 交换光标位置的字符和它右边的字符
ddp 交换光标位置的行和它的下一行

##### 大小写转换

~ 将光标下的字母大小写反向转换
guw 将光标所在的单词变为小写
guw 将光标所在的单词变为小写
gUw 将光标所在的单词变为大写
guu 光标所在的行所有字符变为小写
gUU 光标所在的行所有字符变为大写
g~~ 光标所在的行所有字符大小写反向转换

##### 取得外部输出

`: r!<cmd>` 将命令`<cmd>`的输出结果插入到当前光标所在位置
`:r <file>` 将文件`<file>` 读入到当前光标所在位置

##### 排序

`:1,$!sort` 将文件内的所有内容排序

##### 加入行号

:%!nl 在所有非空行前加入行号
:%!nl -ba 在所有行前加入行号

##### 缩进

`>>` 右缩进（可配合操作数使用）
`<<` 左缩进（可配合操作数使用）

##### 自动补全

ctrl-p 自动补全

##### 显示当前编辑文件名

Ctrl-g 显示当前编辑文件名及行数

##### 显示字符  内码

ga 显示光标所在字符的内码（包括十进制码，十六进制码以及八进制码）

#### 文本检索与替换

##### 搜索

/ 在文件中向前搜索
? 在文件中向后搜索

##### 搜索下一个

n 搜索下一个
N 反向搜索下一个

#### vi/vim 设置

##### 查看当前设置的值

`:set all` 查看 vi 或 Vim 中设置的所有选项的当前值
`:set <option>?` 查看特定选项 `<option>` 的当前值

##### 设置行号显示与否

:set number 显示行号
:set no number 取消行号显示

##### 设置自动缩进

:set autoindent 设置自动缩进
:set no autoindent 取消自动缩进设置

##### 设置缩进宽度

:set shiftwidth=4 设置缩进宽度为 4

##### 设置是否忽略大小写

:set ignorecase 设置忽略大小
:set no ignorecase 取消忽略大小设置

##### 设置不可见字符显示与否

:set list 显示不可见字符
:set nolist 取消显示不可见字符设置

## 删除操作

语法: `rm[选项] dirname`
选项中,常用的有这几种:

- -i 删除前逐一询问确认;
- -f 即使被删除的文件的属性是只读，也直接删除，无需逐一确认.
- -r 将目录及其底下的文件/文件夹一并删除.

例如: `rm -rf /user` 会将 `/user` 目录下的文件全部删除.

## 文件传输 SCP
>scp是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，不过cp只是在本机进行拷贝不能跨服务器，而且scp传输是加密的。可能会稍微影响一下速度。当你服务器硬盘变为只读 read only system时，用scp可以帮你把文件移出来。另外，scp还非常不占资源，不会提高多少系统负荷，在这一点上，rsync就远远不及它了。虽然 rsync比scp会快一点，但当小文件众多的情况下，rsync会导致硬盘I/O非常高，而scp基本不影响系统正常使用。
### 命令格式
    scp [参数] [原路径] [目标路径]
### 命令功能
scp是 secure copy的缩写, scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。linux的scp命令可以在linux服务器之间复制文件和目录。
### 命令参数
-1  强制scp命令使用协议ssh1  

-2  强制scp命令使用协议ssh2  

-4  强制scp命令只使用IPv4寻址  

-6  强制scp命令只使用IPv6寻址  

-B  使用批处理模式（传输过程中不询问传输口令或短语）  

-C  允许压缩。（将-C标志传递给ssh，从而打开压缩功能）  

-p 保留原文件的修改时间，访问时间和访问权限。  

-q  不显示传输进度条。  

-r  递归复制整个目录。  

-v 详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。   

-c cipher  以cipher将数据传输进行加密，这个选项将直接传递给ssh。   

-F ssh_config  指定一个替代的ssh配置文件，此参数直接传递给ssh。  

-i identity_file  从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。    

-l limit  限定用户所能使用的带宽，以Kbit/s为单位。     

-o ssh_option  如果习惯于使用ssh_config(5)中的参数传递方式，   

-P port  注意是大写的P, port是指定数据传输用到的端口号   

-S program  指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。


### 使用实例
#### 从本地服务器复制到远程服务器： 
##### 复制文件
命令格式：  

    scp local_file remote_username@remote_ip:remote_folder  

或者  

    scp local_file remote_username@remote_ip:remote_file  

或者  

    scp local_file remote_ip:remote_folder  

或者  

    scp local_file remote_ip:remote_file  

第1,2个指定了用户名，命令执行后需要输入用户密码，第1个仅指定了远程的目录，文件名字不变，第2个指定了文件名  

第3,4个没有指定用户名，命令执行后需要输入用户名和密码，第3个仅指定了远程的目录，文件名字不变，第4个指定了文件名   

##### 复制目录
命令格式：  

    scp -r local_folder remote_username@remote_ip:remote_folder  

或者  

    scp -r local_folder remote_ip:remote_folder  

第1个指定了用户名，命令执行后需要输入用户密码；  

第2个没有指定用户名，命令执行后需要输入用户名和密码；
#### 从远程服务器复制到本地服务器： 
从远程复制到本地的scp命令与上面的命令雷同，只要将从本地复制到远程的命令后面2个参数互换顺序就行了。


