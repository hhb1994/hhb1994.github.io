---
title: debounceåœ¨vue ä¸­çš„ä½¿ç”¨
tags: [JavaScript, vue]
categories: æŠ€æœ¯
---
# ä»€ä¹ˆæ˜¯ debounce
>n. é˜²åè·³
æŒ‰é”®é˜²åè·³ï¼ˆDebounceï¼‰ä¸ºä»€ä¹ˆè¦å»æŠ–åŠ¨å‘¢ï¼Ÿæœºæ¢°æŒ‰é”®åœ¨æŒ‰ä¸‹æ—¶ï¼Œå¹¶éæŒ‰ä¸‹å°±æ¥è§¦çš„å¾ˆå¥½ï¼Œå°¤å…¶æ˜¯æœ‰ç°§ç‰‡çš„æœºæ¢°å¼€å…³ï¼Œä¼šåœ¨æ¥è§¦çš„ç¬é—´åå¤çš„å¼€åˆå¤šæ¬¡ï¼Œç›´åˆ°å¼€å…³çŠ¶æ€å®Œå…¨æ”¹å˜ã€‚å¤§å­¦æ—¶å€™åšè¿‡ç”µå­å®éªŒçš„éƒ½çŸ¥é“,æŒ‰é”®çš„æ—¶å€™éœ€è¦åŠ ä¸Šæ¶ˆæŠ–å‡½æ•°.

# debounce çš„ä½¿ç”¨åœºæ™¯
* è°ƒæ•´é¡µé¢å®½åº¦ ,resize æ—¶,é¿å…é¢‘ç¹æ¸²æŸ“å¯¼è‡´é¡µé¢å¡é¡¿
* è¾“å…¥æ¡†è¾“å…¥æœç´¢ğŸ”æ¡ä»¶,ä¸ºäº†ä¼˜åŒ–ä½“éªŒ,æ²¡æœ‰è®¾ç½®æœç´¢æŒ‰é’®,ä½†æ˜¯å°½é‡å‡å°‘ api è°ƒç”¨
* ...

# JavaScript å®ç° debounce
JavaScript å®ç° debounce åˆ©ç”¨äº†[é—­åŒ…](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures)çš„æ¦‚å¿µ.

```js
function debounce(fn, wait) {
  let timeout = null;
  return function() {
    if (timeout !== null) clearTimeout(timeout);
    timeout = setTimeout(fn, wait);
  };
}
```

ä¸Šé¢çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå»¶æ—¶ç§’æ•°.
å…¶ä¸­`let timeout = null;`åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ debounce å‡½æ•°æ—¶å®šä¹‰.
å®ç°å¦‚æœæ²¡æœ‰è®¡æ—¶å™¨,åˆ™æ–°å»ºä¸€ä¸ªè®¡æ—¶å™¨.å·²ç»å­˜åœ¨è®¡æ—¶å™¨çš„æƒ…å†µä¸‹,ä¼šé”€æ¯å½“å‰å­˜åœ¨çš„è®¡æ—¶å™¨,å¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨.
è¿™æ ·å°±å¯ä»¥è¾¾åˆ°æ¶ˆæŠ–çš„æ•ˆæœ.ä¾‹å¦‚,ç”¨æˆ·åœ¨è¾“å…¥æ¡†è¿›è¡Œè¾“å…¥æ—¶,è®¾ç½®äº†ä¸€ä¸ª 1000ms çš„å»¶æ—¶å‡½æ•°,é‚£ä¹ˆåœ¨ç”¨æˆ·è¾“å…¥å®Œæ¯•ä»¥åæ‰ä¼šåƒåç«¯å‘èµ·æŸ¥è¯¢è¯·æ±‚,å¯ä»¥å‡å°‘å¤§é‡çš„ç½‘è·¯è¯·æ±‚.

# debounce åœ¨ vue ä¸­çš„ä½¿ç”¨

```js
//utils.js
function debounce(fn, wait) {
  let timeout = null;
  return function() {
    if (timeout !== null) clearTimeout(timeout);
    timeout = setTimeout(fn, wait);
  };
}

export {  debounce };
```
```js
// app.vue
import { debounce } from "./../utils/utils";

//åœ¨ vue ä¸­çš„ created å£°æ˜å‘¨æœŸä¸­,æ·»åŠ å¯¹æ•°æ®çš„ç›‘å¬
//è€Œä¸æ˜¯åœ¨ watch ä¸­è°ƒç”¨
created() {

    this.$watch(
      "filter",
      debounce(() => {
        this.getList();
      }, 500)
    );
    

  }
mounted:{
    getList(){
        //your code here
    }
}
```
